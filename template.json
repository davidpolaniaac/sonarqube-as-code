{
  "variables": {
    "build_number": "{{env `BUILD_BUILDNUMBER`}}"
  },
  "builders": [
    {
      "type": "digitalocean",
      "image": "coreos-stable",
      "region": "nyc3",
      "size": "512mb",
      "snapshot_name": "devops-{{user `build_number`}}",
      "ssh_username": "core"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline": [
        "docker pull sonarqube",
        "docker run -d --name sonarqube -p 9000:9000 sonarqube",
      ]
    }
  ]
}
